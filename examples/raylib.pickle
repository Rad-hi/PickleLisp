(dll "raylib" "../raylib-5.5_linux_amd64/lib/libraylib.so")

(extern raylib "InitWindow" {w h title})
(extern raylib "WindowShouldClose" {a b c d})
(extern raylib "BeginDrawing" {r})
(extern raylib "EndDrawing" {r})
(extern raylib "CloseWindow" {r})
(extern raylib "DrawText" {msg x y sz color})
(extern raylib "SetTargetFPS" {a b})


; NOTE: I haven't implemented tail call optimization yet,
; so this will eventually overflow the stack
( fn { loop func } {
    if ( == (func {} ) true )
    { nil }
    {
        do  
        ( BeginDrawing {} )
            ( DrawText {} )
        ( EndDrawing {} )
        ( loop func )
    }
})

( InitWindow {} )
( SetTargetFPS {} )
( loop WindowShouldClose)
( CloseWindow {} )