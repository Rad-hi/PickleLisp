(dll "raylib" "./raylib-5.5_linux_amd64/lib/libraylib.so")

( mktype "Color" {Char Char Char Char} )

( extern raylib "InitWindow" {Int Int String} {Void} )
( extern raylib "WindowShouldClose" {Void} {Int} )
( extern raylib "BeginDrawing" {Void} {Void} )
( extern raylib "EndDrawing" {Void} {Void} )
( extern raylib "CloseWindow" {Void} {Void} )
( extern raylib "SetTargetFPS" {Int} {Void} )
( extern raylib "ClearBackground" {Color} {Void} )
( extern raylib "GetTouchX" {Void} {Int} )
( extern raylib "GetTouchY" {Void} {Int} )
( extern raylib "DrawPixel" {Int Int Color} {Void} )
( extern raylib "IsKeyPressed" {Int} {Int} )

( def {ZOZINGRAY}   (list 22 22 22 255) )
( def {PICKLEGREEN} (list 133 161 106 255) )

( def {FPS} 30 )
( def {title} "PcikleLisp RayLib Example - touch" )
( def {win_width} 960 )
( def {win_height} 480 )

( def {KEY_R} 82 )

( fn { loop func } {

    if ( == ( func {} ) 1 )
    { nil }
    {
        ( BeginDrawing {} )

            (
                if ( == (IsKeyPressed KEY_R) 1)
                { ( ClearBackground ZOZINGRAY ) }
                { nil }
            )

            ( def {x} ( GetTouchX {} ) )
            ( def {y} ( GetTouchY {} ) )

            ( DrawPixel x y PICKLEGREEN )

        ( EndDrawing {} )
        ( loop func )
    }
})


( InitWindow win_width win_height title )
( ClearBackground ZOZINGRAY )
( SetTargetFPS FPS )
( loop WindowShouldClose)
( CloseWindow {} )
